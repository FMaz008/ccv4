<script type="text/javascript">
//<!--
	function gosearch(type){
		var type_search = type;
		
		$(type+"_results").innerHTML="Chargement en cours...";
		$(type+"_results").style.display="inline";
		$(type+"_button").style.display="inline";
				
		switch(type){
			case "pan_ajout":				type_search = "item";	break;
			case "pan_transfert_lieu":		type_search = "lieu";	break;
			case "pan_transfert_boutique":	type_search = "lieu";	break;
			case "pan_transfert_casier":	type_search = "casier";	break;
			case "pan_transfert_perso":		type_search = "perso";	break;
			case "pan_transfert_item":		type_search = "item";	break;
		}
		
		var myAjax = new Ajax.Updater(
			type+'_results', 
			'?mj=Search&popup=1', 
			{
				method: 'post', 
				parameters: 'searchWhat=inventaire_'+type_search+'&search=' + $(type+'_search').value
			});
	}
	
	function testerRadio(radio) {
		var sel = false;
		
		if(!is_defined(radio)){ //Si aucun résultats
			sel = false;
		}else{
		//void(el=d.getElementsByTagName('INPUT'));
			for(i=0;i<el.length;i++)
				void(el[i].checked=1)
			
			if( is_defined(radio.length) ){ //Si plus de 1 résultat
				for (var i=0; i<radio.length;i++)
					if (radio[i].checked)
						sel = true;
			}else{ 	//Si 1 seul résultat
				if (radio.checked)
					sel = true;
			}
		}
		
		if (!sel)
			alert('Vous devez sélectionner un item.');
			
		return sel;
	}
	
	function testerCheck(theForm, checkName) {
		var sel = false;

		var elchk=theForm.elements[checkName];	
		
		if(!is_defined(elchk)){ //Si aucun résultats
			sel = false;
		}else{
			if( is_defined(elchk.length) ){ //Si plus de 1 résultat
				for (var i=0; i<elchk.length;i++)
					if (elchk[i].checked)
						sel = true;
			}else{ 	//Si 1 seul résultat
				if (elchk.checked)
					sel = true;
			}
		}
		
		if (!sel)
			alert('Vous devez sélectionner un item.');
			
		return sel;
	}
	
	function is_defined( v ){
	    return typeof(v) != 'undefined';
	}

	function checkEnter(e, type){
		if (e.keyCode == 13){
			gosearch(type);
			return false;
		}
	}
	
	function showPanel(panelName){
		//Masquer tous les panel
		$('pan_ajout').style.display='none';
		$('pan_transfert').style.display='none';
		$('pan_transfert_lieu').style.display='none';
		$('pan_transfert_boutique').style.display='none';
		$('pan_transfert_perso').style.display='none';
		$('pan_transfert_casier').style.display='none';
		$('pan_transfert_item').style.display='none';
		
		//Afficher le(s) panel(s) demandé(s)
		if(panelName=='pan_transfert_lieu' || panelName=='pan_transfert_perso' || panelName=='pan_transfert_casier' || panelName=='pan_transfert_boutique' || panelName=='pan_transfert_item')
			$('pan_transfert').style.display='inline';
			
		$(panelName).style.display='inline';
	}
//-->
</script>


<form name="form1" action="" method="post">
	<?php if(isset($CASIER)) { ?>
		<input type="hidden" name="casier" value="<?php echo $CASIER;?>" />
	<?php } ?>
<table style="width:800px;">
	<tr>
		<td class="title" colspan="5">
			<?php if(isset($CASIER) && !empty($CASIER)) { ?>
				Modifier l'inventaire du casier #<?php echo $CASIER;?> du lieu <?php echo $LIEU_TECH;?>
			<?php }else{ ?>
				Modifier l'inventaire du lieu <?php echo $LIEU_TECH;?>
			<?php } ?>
		</td>	
	</tr>
	
	<?php
	$currentCat = '';
	if(!isset($ITEMS)){
		?>
			<i><strong>L'inventaire est vide</strong></i>
		<?php
	}else{
		foreach ($ITEMS as $item){
			$showHeader = false;
			if($currentCat != $item->getTypeTech()){
				?> 
				</table>
				<?php
				$currentCat = $item->getTypeTech();
				$showHeader = true;
			}
			switch ($item->getTypeTech()){
				case 'arme_feu':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="16" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fiabilité</td>
						<td class="name">Force</td>
						<td class="name">Pa</td>
						<td class="name">Portée</td>
						<td class="name">Précision</td>
						<td class="name">Resistance</td>
						<td class="name">Tir par tour</td>
						<td class="name">Munitions</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value">
						<?php if($item->canRegroupe()){ ?>
							<input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" />
						<?php } ?>
					</td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFiabilite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getForce();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPa();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPortee();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrecision();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getResistance();?>/<?php echo $item->getResistanceMax();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getTirParTour();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMunition();?>/<?php echo $item->getMunitionMax();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'arme_blanche':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="14" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fiabilité</td>
						<td class="name">Force</td>
						<td class="name">Pa</td>
						<td class="name">Portée</td>
						<td class="name">Précision</td>
						<td class="name">Resistance</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFiabilite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getForce();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPa();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPortee();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrecision();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getResistance();?>/<?php echo $item->getResistanceMax();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'arme_lancee':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="13" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fiabilité</td>
						<td class="name">Force</td>
						<td class="name">Pa</td>
						<td class="name">Portée</td>
						<td class="name">Précision</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFiabilite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getForce();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPa();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPortee();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrecision();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'arme_paralysante':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="13" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fiabilité</td>
						<td class="name">Force</td>
						<td class="name">Pa</td>
						<td class="name">Portée</td>
						<td class="name">Précision</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFiabilite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getForce();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPa();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPortee();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrecision();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'arme_explosif':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="13" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fiabilité</td>
						<td class="name">Force</td>
						<td class="name">Pa</td>
						<td class="name">Portée</td>
						<td class="name">Précision</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFiabilite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getForce();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPa();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPortee();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrecision();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'autre':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="8" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'badge':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="8" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?> (<?php echo $item->getTitre();?>)</a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'cartebanque':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">No Carte</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getNoCarte();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'cartememoire':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="12" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Crypt</td>
						<td class="name">Key</td>
						<td class="name">Écriture</td>
						<td class="name">Mémoire</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->isCrypt();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getKey();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMcWrite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMemorySize();?>/<?php echo $item->getMemorySizeMax();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'clef':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" style="width:50px;">Equipé</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name" style="width:20px;">Pass</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value">
						<?php
						if($item->canEquip()){
							if (!$item->isEquip()){
								?>
								<a href="?mj=Perso_InventaireItemEquiper&id=<?php echo $item->getInvId();?>&rid=<?php echo $_GET['id'];?>&equip=1">Équiper</a>
								<?php
							}else{
								?>
								<a href="?mj=Perso_InventaireItemEquiper&id=<?php echo $item->getInvId();?>&rid=<?php echo $_GET['id'];?>"&equip=0>Ranger</a>
								<?php
							}
						}
						?>
					</td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value"><?php echo $item->getCode();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'defense_tete':
				case 'defense_torse':
				case 'defense_bras':
				case 'defense_main':
				case 'defense_jambe':
				case 'defense_pied':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Resistance</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getResistance();?>/<?php echo $item->getResistanceMax();?> Seuil: <?php echo $item->getResistanceSeuil();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				//case 'drogue':
                                case 'drogue_drogue': 
                                case 'drogue_substance':
                                case 'drogue_antirejet':
                                case 'drogue_autre':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="8" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'livre':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="8" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Titre</td>
						<td class="name" style="width:150px;">Auteur</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getTitre();?></a></td>
					<td class="value"><?php echo $item->getAuteur();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'munition':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="7" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" value=""/></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'nourriture':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Pn</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPn();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'ordinateur':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="13" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Crypt</td>
						<td class="name">Key</td>
						<td class="name">Écriture</td>
						<td class="name">Mémoire</td>
						<td class="name">Internet</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo ($item->isCrypt()) ? 'Oui' : 'Non'; ?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getKey();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMcWrite();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMemorySize();?>/<?php echo $item->getMemorySizeMax();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->isInternetCapable();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'sac':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Capacité</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getCapaciteMax();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'talkiewalkie':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="13" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">Fréquence</td>
						<td class="name">Émet</td>
						<td class="name">Crypt</td>
						<td class="name">Key</td>
						<td class="name">Silence</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getFrequence();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getCanTalk();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getCryptCapable();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getClef();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getSilenceCapable();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'telephone':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="14" class="name"><?php echo $item->getType();?></td></tr>
						<tr>					
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name">No Tel</td>
						<td class="name">Prix Appel</td>
						<td class="name" style="width:175px;">No Compte</td>
						<td class="name">Anonyme</td>
						<td class="name">Type Affichage</td>
						<td class="name">Memoire</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getNotel();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPrixAppel();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getNobanque();?>-<?php echo $item->getNocompte();?> (Nip: <?php echo $item->getNip();?>)</td>
					<td class="value" style="text-align:right;"><?php echo $item->getAnonymeCapable();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getTypeAffichage();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMemorySize();?>/<?php echo $item->getMemorySizeMax();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'trousse':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="7" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				case 'media':
					if ($showHeader){
						?>
						<table style="width:800px;">
						<tr><td colspan="9" class="name"><?php echo $item->getType();?></td></tr>
						<tr>
						<td class="name" style="width:15px;">&nbsp;</td>
						<td class="name" style="width:20px;">Qte</td>
						<td class="name" >Nom</td>
						<td class="name" style="width:20px;">Pr</td>
						<td class="name" style="width:20px;">Média accessible</td>
						<td class="name" style="width:20px;">Sens d'accès</td>
						<?php if(!isset($CASIER) || empty($CASIER)){?>
							<td class="name" style="width:50px;">Cacher</td>
							<td class="name" style="width:50px;">Bonus cachette</td>
							<td class="name" style="width:50px;">Num&eacute;ro cachette</td>
						<?php }?>
						</tr>
						<?php
					}
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="value"><?php if($item->canRegroupe()){ ?><input type="text" class="text" size="2" name="inv<?php echo $item->getInvId();?>" value="<?php echo $item->getQte();?>" /><?php } ?></td>
					<td class="value"><a href="?mj=Item_Inv_Mod&id=<?php echo $item->getInvId();?>&rpage=Lieu_Inventaire&rid=<?php echo $_GET['id'];?>"><?php echo $item->getNom();?></a></td>
					<td class="value" style="text-align:right;"><?php echo $item->getPr();?></td>
					<td class="value" style="text-align:right;"><?php echo $item->getMediaTypeAffichable();?></td>
					<td class="value" style="text-align:right;"><?php if($item->isEmetteur()){echo "Emetteur";}else{echo "Récepeteur";}?></td>
					<?php if(!isset($CASIER) || empty($CASIER)){?>
						<td class="value"><input type="checkbox" <?php if($item->iscache()){?> checked="checked" <?php }?> name="<?php echo $item->getInvId();?>_cache" /></td>
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>TauxCache" value="<?php echo $item->getTauxCache();?>" />
						<td class="value"><input type="text" class="text" size="4" name="inv<?php echo $item->getInvId();?>CacheNo" value="<?php echo $item->getCacheNo();?>" />
					<?php }?>
					</tr>
					<?php
					break;
				default:
					?>
					<tr>
					<td class="name"><input type="checkbox" name="invId[]" value="<?php echo $item->getInvId();?>" /></td>
					<td class="name" colspan="3">Type d'item non pris en charge (<?php echo $item->getType();?>)</td>
					</tr>
					<?php
			}
		}
	}
	?>
	
</table>



<a name="pan" />
<hr />


<div id="pan">
	<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_ajout');">Ajoute un/des item(s) ...</a> &nbsp;&nbsp;&nbsp;
	<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert');">Transférer la sélection ...</a> &nbsp;&nbsp;&nbsp;
	<input type="submit" class="button" name="del" style="background-color:#330000;" value="Supprimer" onClick="document.forms['form1'].action='?mj=Lieu_InventaireItemDel&id=<?php echo $_GET['id'];?>&rpage=Mj_Lieu_Inventaire&rid=<?php echo $_GET['id'];?>';return (testerCheck(this.form, 'invId[]'));" /> &nbsp;&nbsp;&nbsp;
	<input type="submit" class="button" name="mod" value="Enregistrer" onClick="document.forms['form1'].action='?mj=Lieu_InventaireItemMod&id=<?php echo $_GET['id'];?>&rpage=Mj_Lieu_Inventaire&rid=<?php echo $_GET['id'];?>';" /> &nbsp;&nbsp;&nbsp;
	
	
	<div id="pan_ajout" style="display:none;clear:both;">
		<br />&nbsp;&nbsp;&nbsp;... correspondant à: 
		<br /> Nom/Id.: <input type="text" class="text" id="pan_ajout_search" style="width:125px;" onkeypress="return checkEnter(event,'pan_ajout');" />
		<input type="button" class="button" onclick="gosearch('pan_ajout');" value="Rechercher" />
		<br />
		
		<div id="pan_ajout_results" style="display:none;clear:both;"></div>
		<div id="pan_ajout_button" style="text-align:center;display:none;clear:both;">
			<input type="submit" class="button" name="add" value="Ajouter" onClick="document.forms['form1'].action='?mj=Lieu_InventaireItemAdd&id=<?php echo $_GET['id'];?><?php if(isset($_GET['cid'])){ echo '&cid=' . $_GET['cid']; } ?>&rpage=Mj_Lieu_Inventaire&rid=<?php echo $_GET['id'];?>';return testerCheck(this.form, 'itemId[]');" />
		</div>
	</div>
	
	
	<div id="pan_transfert" style="display:none;clear:both;">
		<br />&nbsp;&nbsp;&nbsp;... vers: 
		<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert_lieu');">Un lieu ...</a> &nbsp;&nbsp;&nbsp;
		<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert_boutique');">Une boutique ...</a> &nbsp;&nbsp;&nbsp;
		<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert_casier');">Un casier ...</a> &nbsp;&nbsp;&nbsp;
		<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert_perso');">Un perso ...</a> &nbsp;&nbsp;&nbsp;
		<strong>&gt;</strong> <a href="#pan" onclick="showPanel('pan_transfert_item');">Un item ...</a> &nbsp;&nbsp;&nbsp;
		
		
		<?php
		$arrType = array(
						array('tech'=>'lieu',		'class'=>'Lieu_InventaireDonnerLieu',		'radio'=>'lieuTech',	'txt'=>'Lieu'),
						array('tech'=>'boutique',	'class'=>'Lieu_InventaireDonnerBoutique',	'radio'=>'lieuTech',	'txt'=>'Boutique'),
						array('tech'=>'casier',		'class'=>'Lieu_InventaireDonnerCasier',		'radio'=>'casierId',	'txt'=>'Casier'),
						array('tech'=>'perso',		'class'=>'Lieu_InventaireDonnerPerso',		'radio'=>'persoId',		'txt'=>'Perso'),
						array('tech'=>'item',		'class'=>'Lieu_InventaireDonnerItem',		'radio'=>'itemId',		'txt'=>'Item')
					);
		foreach($arrType as $type){
		?>
			<div id="pan_transfert_<?php echo $type['tech'];?>" style="display:none;clear:both;">
				<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;... correspondant à: 
				<br /> Nom/Id.: <input type="text" class="text" id="pan_transfert_<?php echo $type['tech'];?>_search" style="width:125px;" onkeypress="return checkEnter(event,'pan_transfert_<?php echo $type['tech'];?>');" />
				<input type="button" class="button" onclick="gosearch('pan_transfert_<?php echo $type['tech'];?>');" value="Rechercher <?php echo $type['txt'];?>" />
				<br />
				
				<div id="pan_transfert_<?php echo $type['tech'];?>_results" style="display:none;clear:both;"></div>
				<div id="pan_transfert_<?php echo $type['tech'];?>_button" style="text-align:center;display:none;clear:both;">
					<input type="submit" class="button" name="move<?php echo $type['tech'];?>" value="Déposer/Transférer" onClick="document.forms['form1'].action='?mj=<?php echo $type['class'];?>&id=<?php echo $_GET['id'];?>&rpage=Mj_Lieu_Inventaire&rid=<?php echo $_GET['id'];?>';return (testerRadio(this.form.<?php echo $type['radio'];?>));" />
				</div>
			</div>
		<?php
		}
		?>
		
	</div>
	
</div>
</form>
